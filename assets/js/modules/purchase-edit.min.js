function get_satuan(a){$("select#Satuan option").remove(),$.getJSON("'.base_url('purchase_order/dropdown_satuan/').'/"+a,function(a){$.each(a,function(a,e){$("#Satuan").append($("<option></option>").val(a).html(e))})})}function get_barang(a){$("select#Kode option").remove(),$.getJSON("'.base_url('purchase_order/get_drop_barang/').'/"+a,function(a){$.each(a,function(a,e){$("#Kode").append($("<option></option>").val(a).html(e))})})}function gettotal(){var a=$("#faktur_po").val();$.get("'.base_url('purchase_order/get_po_detail_total/').'/"+a,function(a,e){$("#totalbayar").val(a>0?a:0)})}function reset_barang(){var a=$("#id_supplier").val();get_barang(a)}$(document).ready(function(){$("#totalbayar").maskMoney({thousands:".",decimal:",",allowZero:!0});var a=$("#faktur_po").val();$.get("'.base_url('purchase_order/get_po_detail_total/').'/"+a,function(a,e){$("#totalbayar").val(a>0?a:0)}),$("#id_supplier").change(function(){var a=$(this).val();get_barang(a)}),$("#Kode").change(function(){var a=$(this).val();get_satuan(a)}),$("#id_supplier").find("option[value='.$data['id_supplier'].']").prop("selected",!0),$("#id_supplier option:not(:selected)").attr("disabled",!0),$("#status").find("option[value='.$data['status'].']").prop("selected",!0),$("#id_bayar").find("option[value='.$data['id_bayar'].']").prop("selected",!0),$("#modal-notif").on("hidden.bs.modal",function(){$(this).data("modal",null),window.location="'.base_url('purchase_order').'"});var e=$(".tabletemp").DataTable({ajax:{url:"'.base_url('purchase_order/get_po_detail/'.$po['faktur_po'].'/'.$this->enkrip().'/').'",dataType:"json"},sServerMethod:"POST",bServerSide:!0,bAutoWidth:!0,SortClasses:!0,bscrollCollapse:!0,paging:!1,deferRender:!0,bFilter:!1,ordering:!1});$("body").on("click",".refresh_barang",function(a){a.preventDefault(),reset_barang()}),$("body").on("click",".btn-add",function(a){a.preventDefault();var t=($("#faktur_po").val(),$("#Kode").val()),o=$("#Qty").val(),n=$("#Satuan").val(),r={id_barang:t,jumlah:o,id_satuan:n,faktur_po:$("#faktur_po").val(),ajax:1};$(this).ready(function(){$.ajax({url:"'.base_url('purchase_order/submit_detail').'",data:r,type:"POST",success:function(a){$("#Kode").prop("value",""),$("#Qty").prop("value",""),$("#Satuan").prop("value",""),$("#Satuan option").prop("selected",function(){return this.defaultSelected}),$("#Kode option").prop("selected",function(){return this.defaultSelected}),e.clear(0).draw(),gettotal()}})})}),$("body").on("click",".delete_temp",function(a){a.preventDefault();var t={id:$(this).attr("id"),ajax:1};confirm("Anda Yakin Ingin Menghapus Item Ini?")&&$(this).ready(function(){$.ajax({url:"'.base_url('purchase_order/delete_detail').'",type:"POST",data:t,success:function(a){e.clear(0).draw(),gettotal()}})})}),$("#modal-notif").on("hidden.bs.modal",function(){$(this).data("modal",null),window.location="'.base_url('purchase_order').'"})});