/*
Banking.min.js
Untuk Transaksi Modul Bank
SIM MURIA PS
roniwahyu@gmail.com
*/
function total_bank_detail(a){$.get(baseurl+"get_total_detail/"+a+"/",function(a,t){d=JSON.parse(a),d.total_nominal>0?($("#total_bank").val(d.total_nominal).trigger("change"),$("#total_bankx").val(accounting.formatMoney(d.total_nominal,"Rp. ",2,".",",")).trigger("change")):($("#total_bank").val(0),$("#total_bankx").val(0))}),console.clear()}function total_giro(a){$.get(baseurl+"get_total_giro/"+a+"/",function(a,t){d=JSON.parse(a),d.total_tt_giro>0?($("#total_giro").val(d.total_tt_giro).trigger("change"),$("#total_girox").val(accounting.formatMoney(d.total_tt_giro,"Rp. ",2,".",",")).trigger("change")):($("#total_giro").val(0),$("#total_girox").val(0))}),console.clear()}$("document").ready(function(){total_bank_detail(bukti),total_giro(bukti),console.clear();var a=$(".table_bank_detail").DataTable({ajax:{url:baseurl+"get_bank_detail/"+bukti,dataType:"json"},sServerMethod:"POST",bServerSide:!0,bAutoWidth:!0,SortClasses:!0,bscrollCollapse:!0,paging:!1,deferRender:!0,bFilter:!1,ordering:!1}),t=$(".table_tt_giro").DataTable({ajax:{url:baseurl+"get_tt_giro/"+bukti,dataType:"json"},sServerMethod:"POST",bServerSide:!0,bAutoWidth:!1,SortClasses:!0,bscrollCollapse:!0,paging:!1,deferRender:!0,bFilter:!1,ordering:!1});$("#trx_masuk").click(function(){$("#trx_masuk").is(":checked")&&($("#id_supplier").hide(100),$("#id_supplier").val(""),$(".supplier").hide(100),$("#id_customer").show(100),$(".customer").show(100),$("#bukti_bank").val(bm),$(".panel_bank").addClass("panel-primary"),$(".panel_bank").removeClass("panel-danger"))}),$("#trx_keluar").click(function(){$("#trx_keluar").is(":checked")&&($("#id_supplier").show(100),$("#id_customer").hide(100),$("#id_customer").val(""),$(".supplier").show(100),$(".customer").hide(100),$("#bukti_bank").val(bk),$(".panel_bank").removeClass("panel-primary"),$(".panel_bank").addClass("panel-danger"))}),$("body").on("click",".use_rek_bank",function(a){a.preventDefault();var t=$(this),e=t.data("id"),l=t.data("rek-bank"),n=t.data("kode-bank"),o=t.data("keterangan");e&&($("#akun_bank").val(l),$("#id_bank").val(e),$("#banks").val(n+" - "+o)),console.clear()}),$("body").on("click",".load_bank",function(a){a.preventDefault(),$(".table_rek_bank").DataTable({ajax:{url:banksurl+"getbanks/",dataType:"json"},sServerMethod:"POST",bServerSide:!0,bAutoWidth:!0,SortClasses:!0,bscrollCollapse:!0,paging:!1,deferRender:!0,bFilter:!1,ordering:!1}),console.clear()}),$("body").on("click",".add_bank",function(t){t.preventDefault();var e=$("#bukti_bank").val(),l=$("#faktur_lawan").val(),n=($("#akun_lawan").val(),$("#no_perkiraan").val()),o=$("#deskripsi").val(),i=$("#nilai").val(),r={faktur_lawan:l,nominal_detail:i,akun_lawan:n,keterangan_detail:o,bukti_bank:$("#bukti_bank").val(),ajax:1};$(this).ready(function(){$.ajax({url:baseurl+"submit_detail/",data:r,type:"POST",success:function(t){$(".add_panel").find("input[type=text]").val(""),a.clear().draw(),total_bank_detail(e)}})}),console.clear()}),$("body").on("click",".add_tt_giro",function(a){a.preventDefault();var e=$("#tipe_tt_giro").val(),l=$("#tgl_tt_giro").val(),n=$("#no_tt_giro").val(),o=$("#nominal").val(),i={nominal:o,bukti_bank:bukti,tipe_tt_giro:e,tgl_tt_giro:l,no_tt_giro:n,ajax:1};$(this).ready(function(){$.ajax({url:baseurl+"submit_giro/",data:i,type:"POST",success:function(a){$(".table_tt_giro").find("input[type=text]").val(""),t.clear().draw(),total_giro(bukti)}})}),console.clear()}),$("body").on("click",".del_detail",function(t){t.preventDefault();var e=$(this).attr("id");$.post(baseurl+"delete_detail/"+e,{id:e,ajax:1},function(t,e){(e="success")&&(a.clear().draw(),total_bank_detail(bukti))}),console.clear()}),$("body").on("click",".del_tt_giro",function(a){a.preventDefault();var e=$(this).attr("id");$.post(girourl+"delete/"+e,{id:e,ajax:1},function(a,e){(e="success")&&(t.clear().draw(),total_giro(bukti))}),console.clear()}),$("#modal-bank").on("hidden.bs.modal",function(){$(".table_rek_bank").DataTable().destroy()}),$("#modal-notif").on("hidden.bs.modal",function(){$(this).data("modal",null),$("#trx_masuk").is(":checked")?window.location=baseurl+"masuk/":window.location=baseurl+"keluar/"}),console.clear()});